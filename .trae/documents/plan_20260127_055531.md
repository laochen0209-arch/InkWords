# 数据库分类问题修复计划

## 问题分析

### 问题 1：分类大小写不一致
- **API 路由** (`app/api/articles/route.ts`):
  - 使用 `category.toLowerCase()` 处理大小写
  - 检查 `categoryLower === 'classics' || categoryLower === 'classics'`（这个条件有问题）
  - 需要修复为 `categoryLower === 'classics'`

### 问题 2：JSON 容错处理
- **前端页面** (`app/library/classics/[id]/page.tsx`):
  - 已经有 try-catch 包裹 JSON.parse
  - 如果解析失败会使用备用方案
  - 容错处理已经存在

## 修复计划

### 1. 修复 API 路由的分类大小写检查
- 修复 `app/api/articles/route.ts` 中的条件判断
- 将 `categoryLower === 'classics' || categoryLower === 'classics'` 改为 `categoryLower === 'classics'`

### 2. 确认 JSON 容错处理
- 确认前端页面的容错处理是否完善
- 如果需要，添加更多的容错逻辑

## 预期效果
- 前端查询时使用小写的 'classics'
- 数据库返回的数据能正确匹配
- JSON 解析失败时有容错处理
- 页面不会因为数据格式问题崩溃