# 修复语言逻辑错误

## 需要修改的文件

### 1. `lib/contexts/language-context.tsx`
- 修复 `switchMode` 函数中的 nativeLang 和 targetLang 设置逻辑
- 确保与 UI 语言逻辑一致

### 2. `app/page.tsx`（欢迎页）
- 修复语言选择逻辑：点击"学英语"按钮时设置 nativeLang="zh", targetLang="en", mode="LEARN_ENGLISH"
- 点击"学中文"按钮时设置 nativeLang="en", targetLang="zh", mode="LEARN_CHINESE"

### 3. `app/settings/languages/page.tsx`
- 重写 `handleSetNative` 和 `handleSetTarget` 函数，确保逻辑清晰正确

### 4. `components/library/library-list.tsx`
- 修复 `getDisplayTitle` 和 `getDisplayDesc` 函数逻辑
- 确保学英语模式显示英文内容，学中文模式显示中文内容

### 5. `components/profile/profile-header.tsx`
- 将硬编码的"天"改为使用翻译 `t.dashboard.checkIn.days`

## 修复后的正确逻辑

| 模式 | 用户母语 | 目标语言 | UI语言 | 题目语言 | 辅助解析 |
|------|---------|---------|--------|---------|---------|
| LEARN_ENGLISH | zh (中文) | en (英文) | zh (中文) | en (英文) | zh (中文) |
| LEARN_CHINESE | en (英文) | zh (中文) | en (英文) | zh (中文) | en (英文) |